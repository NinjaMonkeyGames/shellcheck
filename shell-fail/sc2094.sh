grep foo file.txt | sed -e 's/foo/bar/g' > file.txt